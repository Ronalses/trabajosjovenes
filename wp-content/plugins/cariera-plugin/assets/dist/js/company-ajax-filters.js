jQuery(document).ready((function(a){var e=[];a(".company_listings").on("update_results",(function(n,t,o){var i,s=a(this),r=a(".company_filters"),d=s.find(".company_listings"),c=s.data("per_page"),l=s.data("orderby"),p=s.data("order"),_=s.data("featured"),g=s.data("post_status"),m=a("div.company_listings").index(this),u=a(".listing-loader"),h=s.data("company_layout"),y=s.data("company_version");if(!(m<0)){e[m]&&e[m].abort(),o?(a(".load_more_companies",s).addClass("loading"),a(u).fadeIn()):(a(d).addClass("loading"),a(u).fadeIn(),a(".company, .no_companies_found",d).css("visibility","hidden"));var f=r.find(':input[name^="search_categories"]').map((function(){return a(this).val()})).get(),v="",w="",b=r.find(':input[name="search_keywords"]'),k=r.find(':input[name="search_location"]');b.val()!==b.attr("placeholder")&&(v=b.val()),k.val()!==k.attr("placeholder")&&(w=k.val()),i={action:"cariera_get_companies",search_keywords:v,search_location:w,search_categories:f,filter_post_status:g,per_page:c,orderby:l,order:p,page:t,featured:_,show_pagination:s.data("show_pagination"),form_data:r.serialize(),company_layout:h,company_version:y},e[m]=a.ajax({type:"POST",url:cariera_company_ajax_filters.ajax_url,data:i,success:function(e){if(e)try{e.html&&(o?a(d).append(e.html):a(d).html(e.html)),1==s.data("show_pagination")?(s.find(".company-manager-pagination").remove(),e.pagination&&s.append(e.pagination)):(e.found_companies&&e.max_num_pages!==t?a(".load_more_companies",s).show().data("page",t):a(".load_more_companies",s).hide(),a(".load_more_companies",s).removeClass("loading"),a("li.company",d).css("visibility","visible")),a(d).removeClass("loading"),a(u).fadeOut(),s.triggerHandler("updated_results",e)}catch(a){window.console&&window.console.log(a)}},error:function(a,e,n){window.console&&"abort"!==e&&window.console.log(e+": "+n)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}})),a("#search_keywords, #search_location, #search_categories").change((function(){a("div.company_listings").triggerHandler("update_results",[1,!1])})).change().on("keyup",(function(e){13===e.which&&a(this).trigger("change")})),a(".company_filters").on("click",".reset",(function(){var e=a(this).closest("div.companies"),n=a(this).closest("form");return n.find(':input[name="search_keywords"]').not(':input[type="hidden"]').val(""),n.find(':input[name="search_location"]').not(':input[type="hidden"]').val(""),n.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val(0).trigger("change.select2"),e.triggerHandler("reset"),e.triggerHandler("update_results",[1,!1]),!1})),a(".load_more_companies").click((function(){var e=a(this).closest("div.company_listings"),n=a(this).data("page");return n=n?parseInt(n):1,a(this).data("page",n+1),e.triggerHandler("update_results",[n+1,!0]),!1})),a("div.company_listings").on("click",".company-manager-pagination a",(function(){var e=a("div.company_listings"),n=a(this).data("page");return e.triggerHandler("update_results",[n,!1]),a("body, html").animate({scrollTop:e.offset().top},600),!1}))}));