jQuery(document).ready((function(e){function t(t){return!(!window.sessionStorage||"function"!=typeof window.sessionStorage.setItem||e(document.body).hasClass("disable-job-manager-form-state-storage")||t.data("disable-form-state-storage"))}function i(t){var i=e("div.job_listings").index(t),n=t.data("post_id");return void 0!==n&&n||(n=window.location.href.replace(location.hash,"")),"job_listing_"+n+"_"+i}function n(e,n){if(!t(e))return!1;"object"!=typeof n&&(n={});var a=i(e);try{return window.sessionStorage.setItem(a,JSON.stringify(n))}catch(e){}return!1}function a(e){if(!t(e))return!1;var n=i(e);try{var a=window.sessionStorage.getItem(n);if(a)return JSON.parse(a)}catch(e){}return!1}function o(e,i){if(!t(e)||!e)return!1;var o=a(e);return!!o&&(o.persist_results=i,n(e,o))}function r(e){if(!t(e)||!e)return!1;var i=a(e);if(!i)return!1;var o=e.find(".job_filters");return i.form=o.serialize(),n(e,i)}function s(t,i,n){var a=t.find(".job_listings"),o=e(".showing_jobs");if("boolean"!=typeof n&&(n=!1),"string"==typeof i.showing&&i.showing){var r=jQuery("<span>").html(i.showing);o.show().html("").html(i.showing_links).prepend(r)}else o.hide();return i.showing_all?o.addClass("wp-job-manager-showing-all"):o.removeClass("wp-job-manager-showing-all"),i.html&&(n?a.append(i.html):a.html(i.html)),!0===t.data("show_pagination")?(t.find(".job-manager-pagination").remove(),i.pagination&&t.append(i.pagination)):(!i.found_jobs||i.max_num_pages<=i.data.page?e(".load_more_jobs:not(.load_previous)",t).hide():e(".load_more_jobs",t).show(),e(".load_more_jobs",t).removeClass("loading").data("page",i.data.page),e(".listing-loader").fadeOut(),e("li.job_listing",a).css("visibility","visible")),!0}e(document).on("click","a",(function(){e("div.job_listings").each((function(){r(e(this))}))})),e(document).on("submit","form",(function(){e("div.job_listings").each((function(){r(e(this))}))}));var l=[];if(e("div.job_listings").on("click","li.job_listing a",(function(){o(e(this).closest("div.job_listings"),!0)})).on("click",".job-manager-pagination a",(function(){var t=e(this).closest("div.job_listings"),i=e(this).data("page");return t.triggerHandler("update_results",[i,!1]),e("body, html").animate({scrollTop:t.offset().top},600),!1})).on("update_results",(function(o,r,d){var c,u,g,_,f=e(this),h=e(".job_filters"),p=f.find(".job_listings"),b=f.data("per_page"),m=f.data("orderby"),j=f.data("order"),v=f.data("featured"),w=f.data("filled"),y=(f.data("job_types"),f.data("post_status")),k=e("div.job_listings").index(this),S=e(".listing-loader"),x=f.data("job_layout"),C=f.data("job_version");if(!(k<0)){!function(e){if(!t(e))return!1;var n=i(e);try{window.sessionStorage.removeItem(n)}catch(e){return!1}}(f),l[k]&&l[k].abort(),d&&1!==r||(e("li.job_listing, li.no_job_listings_found",p).css("visibility","hidden"),p.addClass("loading"),e(S).fadeIn()),f.find(".load_more_jobs").data("page",r);var H=[];e(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]',h).each((function(){H.push(e(this).val())})),u=h.find(':input[name^="search_categories"]').map((function(){return e(this).val()})).get(),g="",_="";var I=h.find(':input[name="search_keywords"]'),O=h.find(':input[name="search_location"]');I.val()!==I.attr("placeholder")&&(g=I.val()),O.val()!==O.attr("placeholder")&&(_=O.val()),c={lang:job_manager_ajax_filters.lang,search_keywords:g,search_location:_,search_categories:u,filter_job_type:H,filter_post_status:y,per_page:b,orderby:m,order:j,page:r,featured:v,filled:w,show_pagination:f.data("show_pagination"),form_data:h.serialize(),job_layout:x,job_version:C},l[k]=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%","get_listings"),data:c,success:function(i){if(i)try{i.data=c,s(f,i,d),p.removeClass("loading"),e(S).fadeOut(),f.triggerHandler("updated_results",i),function(e,i){if(!t(e))return!1;var o=a(e);o||(o={persist_results:!1});var r=e.find(".job_listings");i.html=r.html(),o.results=i,n(e,o)}(f,i)}catch(e){window.console&&window.console.log(e)}},error:function(e,t,i){window.console&&"abort"!==t&&window.console.log(t+": "+i)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}})),e("#search_keywords, #search_location, #search_radius, .job_types :input, #search_categories, .job-manager-filter, .cariera-job-filters").change((function(){var t=e("div.job_listings");t.triggerHandler("update_results",[1,!1]),n(t)})).on("keyup",(function(t){13===t.which&&e(this).trigger("change")})),e(".job_filters").on("click",".reset",(function(){var t=e("div.job_listings"),i=e(this).closest("form");return i.find(':input[name="search_keywords"], :input[name="search_location"], .job-manager-filter, .cariera-job-filters').not(':input[type="hidden"]').val("").trigger("change.select2"),i.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val("").trigger("change.select2"),e(':input[name="filter_job_type[]"]',i).not(':input[type="hidden"]').attr("checked","checked"),t.triggerHandler("reset"),t.triggerHandler("update_results",[1,!1]),n(t),!1})).on("submit",(function(){return!1})),e(document.body).on("click",".load_more_jobs",(function(){var t=e(this).closest("div.job_listings"),i=parseInt(e(this).data("page")||1,10);return e(this).addClass("loading"),i+=1,e(this).data("page",i),t.triggerHandler("update_results",[i,!0]),!1})),e.isFunction(e.fn.select2)&&"undefined"!=typeof job_manager_select2_args){var d=job_manager_select2_args;d.allowClear=!0,d.minimumResultsForSearch=10,e('select[name^="search_categories"]:visible').select2(d)}e(window).on("unload",(function(){return e("div.job_listings").each((function(){var i=a(e(this));i&&!i.persist_results&&function(e){if(!t(e))return!1;var i=a(e);i||(i={}),i.results=null,n(e,i)}(e(this))})),!0})),e("div.job_listings").each((function(){var i=e(this),r=e(".job_filters"),l=!1,d=a(i);d&&(d.results&&(l=s(i,d.results),o(i,!1),function(e){if(!t(e))return!1;var i=a(e);i||(i={}),i.form=null,n(e,i)}(i)),"string"==typeof d.form&&""!==d.form&&(r.find("input[type=checkbox]").prop("checked",!1),r.deserialize(d.form),r.find(':input[name^="search_categories"]').not(':input[type="hidden"]').trigger("change.select2"))),!l&&r.length>0&&i.triggerHandler("update_results",[1,!1])}))}));